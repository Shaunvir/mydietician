<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Nutritionists and Dietitians - MyDietitian</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background-color: #f8fafc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        .header {
            background: #6366f1;
            color: white;
            padding: 20px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
        }

        .back-link {
            color: white;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
            opacity: 0.9;
            transition: opacity 0.2s ease;
        }

        .back-link:hover {
            opacity: 1;
        }

        /* Filters Bar */
        .filters-bar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .filters-content {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            font-size: 14px;
            cursor: pointer;
            min-width: 120px;
        }

        .filter-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .results-count {
            color: #6b7280;
            font-size: 14px;
            margin-left: auto;
        }

        .clear-filters {
            background: none;
            border: none;
            color: #6366f1;
            font-size: 14px;
            cursor: pointer;
            text-decoration: underline;
        }

        .save-button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            display: flex;
            gap: 32px;
            padding: 32px 0;
        }

        /* Sidebar Filters */
        .sidebar {
            width: 300px;
            flex-shrink: 0;
        }

        .filter-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e5e7eb;
        }

        .filter-section h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #374151;
        }

        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 6px;
            transition: background 0.2s ease;
            cursor: pointer;
        }

        .filter-option:hover {
            background: #f9fafb;
        }

        .filter-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #6366f1;
        }

        .filter-option label {
            flex: 1;
            font-size: 14px;
            cursor: pointer;
        }

        /* Results Area */
        .results-area {
            flex: 1;
        }

        .dietitian-card {
            background: white;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid #e5e7eb;
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }

        .dietitian-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        .dietitian-info {
            flex: 1;
        }

        .dietitian-name {
            font-size: 24px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .dietitian-credentials {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .credential-badge {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            color: #6b7280;
        }

        .insurance-badge {
            background: #ecfdf5;
            color: #065f46;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .specialties {
            margin-bottom: 16px;
        }

        .specialties-label {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .specialties-list {
            font-size: 14px;
            color: #374151;
            line-height: 1.5;
        }

        .dietitian-description {
            color: #6b7280;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .availability {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .availability-slot {
            background: #eff6ff;
            color: #1d4ed8;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }

        .dietitian-actions {
            display: flex;
            gap: 12px;
        }

        .btn-primary {
            background: #6366f1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background: #5048e5;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: white;
            color: #6366f1;
            border: 1px solid #6366f1;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background: #f0f9ff;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
                gap: 24px;
            }

            .sidebar {
                width: 100%;
            }

            .dietitian-card {
                flex-direction: column;
                text-align: center;
            }

            .dietitian-avatar {
                align-self: center;
            }

            .filters-content {
                flex-direction: column;
                align-items: stretch;
            }

            .results-count {
                margin-left: 0;
                order: -1;
            }
        }

    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="page-title">Find Nutritionists and Dietitians</h1>
                <a href="search.html" class="back-link">‚Üê New Search</a>
            </div>
        </div>
    </header>

    <!-- Filters Bar -->
    <div class="filters-bar">
        <div class="container">
            <div class="filters-content">
                <select class="filter-select" id="insuranceFilter">
                    <option value="">All Insurance</option>
                    <option value="Canada Life">Canada Life</option>
                    <option value="Sun Life Financial">Sun Life Financial</option>
                    <option value="Manulife">Manulife</option>
                    <option value="Great-West Life">Great-West Life</option>
                    <option value="Blue Cross">Blue Cross</option>
                </select>

                <select class="filter-select" id="locationFilter">
                    <option value="">All Locations</option>
                    <option value="Toronto">Toronto, ON</option>
                    <option value="Vancouver">Vancouver, BC</option>
                    <option value="Montreal">Montreal, QC</option>
                </select>

                <select class="filter-select" id="specialtyFilter">
                    <option value="">Specialties (1)</option>
                    <option value="Weight Management">Weight Management</option>
                    <option value="Diabetes Management">Diabetes Management</option>
                    <option value="Heart Health">Heart Health</option>
                    <option value="Gut Health">Gut Health</option>
                    <option value="Sports Nutrition">Sports Nutrition</option>
                </select>

                <select class="filter-select" id="modalitiesFilter">
                    <option value="">Modalities</option>
                    <option value="Video calls">Video calls</option>
                    <option value="In-person">In-person</option>
                    <option value="Phone">Phone</option>
                </select>

                <select class="filter-select" id="sortFilter">
                    <option value="">Sort</option>
                    <option value="name">Name</option>
                    <option value="location">Location</option>
                    <option value="availability">Availability</option>
                </select>

                <select class="filter-select" id="visitTypeFilter">
                    <option value="">Visit Ty</option>
                    <option value="Initial">Initial Consultation</option>
                    <option value="Follow-up">Follow-up</option>
                </select>

                <button class="clear-filters" onclick="clearAllFilters()">Clear</button>
                <button class="save-button" onclick="applyCurrentFilters()">Apply Filters</button>

                <div class="results-count">
                    <span id="resultsCount">4</span> dietitians / nutritionists in <span id="currentLocation">Canada</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Sidebar Filters -->
            <aside class="sidebar">
                <div class="filter-section">
                    <h3>Specialties</h3>
                    <div class="filter-options" id="specialtyOptions">
                        <div class="filter-option">
                            <input type="checkbox" id="accountability" value="Accountability">
                            <label for="accountability">Accountability</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="cbt" value="Cognitive Behavioural Therapy (CBT)">
                            <label for="cbt">Cognitive Behavioural Therapy (CBT)</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="elimination" value="Elimination Diet">
                            <label for="elimination">Elimination Diet</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="exercise" value="Exercise">
                            <label for="exercise">Exercise</label>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="fodmap" value="FODMAP">
                            <label for="fodmap">FODMAP</label>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Results Area -->
            <main class="results-area">
                <!-- Dietitian 1 -->
                <div class="dietitian-card" data-location="Montreal" data-insurance="Canada Life,Sun Life Financial,Manulife,Great-West Life,Blue Cross,Chambers of Commerce Group Insurance,Desjardins Insurance,Industrial Alliance,Medavie Blue Cross,GroupHEALTH" data-specialties="Weight Management,Diabetes Management,Heart Health,Sports Nutrition,PCOS Management,Autoimmune Conditions,Food Allergies & Sensitivities,Gut Health,General Nutrition,Pregnancy & Postpartum,High Blood Pressure,High Cholesterol,Kidney Disease,Vegan & Vegetarian,Eating Disorders,Pediatric Nutrition,Cancer Nutrition,Menopause,Transplant Nutrition,Oral Health" data-modalities="Video calls,In-person">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' rx='60' fill='%23f3e8ff'/%3E%3Ctext x='60' y='75' text-anchor='middle' font-size='48' fill='%236b46c1'%3Eüë©‚Äç‚öïÔ∏è%3C/text%3E%3C/svg%3E" alt="Dr. Sarah Chen" class="dietitian-avatar">
                    
                    <div class="dietitian-info">
                        <h2 class="dietitian-name">Dr. Sarah Chen, RD, FICTIONAL</h2>
                        
                        <div class="dietitian-credentials">
                            <div class="credential-badge">
                                üìπ Video calls
                            </div>
                            <div class="credential-badge">
                                üë• In-person
                            </div>
                            <div class="insurance-badge">
                                ‚úì Accepts All Major Insurance
                            </div>
                        </div>

                        <div class="specialties">
                            <div class="specialties-label">Specialties:</div>
                            <div class="specialties-list">
                                Weight Management, Diabetes Management, Heart Health, Sports Nutrition, PCOS Management, Autoimmune Conditions, Food Allergies & Sensitivities, Gut Health, General Nutrition, Pregnancy & Postpartum, High Blood Pressure, High Cholesterol, Kidney Disease, Vegan & Vegetarian, Eating Disorders, Pediatric Nutrition, Cancer Nutrition, Menopause, Transplant Nutrition, Oral Health
                            </div>
                        </div>

                        <p class="dietitian-description">
                            As a dietitian, I offer my clients a blend of scientific research, practical guidance, and help shape dietary choices for optimal wellbeing. My ideal clients are those seeking to enhance their health without the rigidity of conventional diets. I stand out by blending creativity, patience, and...
                        </p>

                        <div class="availability">
                            <div class="availability-slot">August 1<br>3 appt</div>
                            <div class="availability-slot">August 5<br>5 appt</div>
                            <div class="availability-slot">August 6<br>4 appt</div>
                        </div>

                        <div class="dietitian-actions">
                            <button class="btn-primary" onclick="bookAppointment('Sarah Chen')">Book now</button>
                            <button class="btn-secondary" onclick="viewProfile('Sarah Chen')">View profile</button>
                        </div>
                    </div>
                </div>

                <!-- Dietitian 2 -->
                <div class="dietitian-card" data-location="Vancouver" data-insurance="Canada Life,Sun Life Financial,Manulife,Great-West Life,Blue Cross,Chambers of Commerce Group Insurance,Desjardins Insurance,Industrial Alliance,Medavie Blue Cross,GroupHEALTH" data-specialties="Diabetes Management,Heart Health,Autoimmune Conditions,Cancer Nutrition,Gut Health,Food Allergies & Sensitivities,PCOS Management,High Blood Pressure,High Cholesterol,Kidney Disease,Weight Management,Eating Disorders,Pregnancy & Postpartum,Sports Nutrition,Transplant Nutrition,Vegan & Vegetarian,General Nutrition,Pediatric Nutrition,Menopause,Oral Health" data-modalities="Video calls,In-person">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' rx='60' fill='%23fef3c7'/%3E%3Ctext x='60' y='75' text-anchor='middle' font-size='48' fill='%23d97706'%3Eüë©‚Äç‚öïÔ∏è%3C/text%3E%3C/svg%3E" alt="Dr. Priya Sharma" class="dietitian-avatar">
                    
                    <div class="dietitian-info">
                        <h2 class="dietitian-name">Dr. Priya Sharma, RD, FICTIONAL</h2>
                        
                        <div class="dietitian-credentials">
                            <div class="credential-badge">
                                üìπ Video calls
                            </div>
                            <div class="credential-badge">
                                üë• In-person
                            </div>
                            <div class="insurance-badge">
                                ‚úì Accepts All Major Insurance
                            </div>
                        </div>

                        <div class="specialties">
                            <div class="specialties-label">Specialties:</div>
                            <div class="specialties-list">
                                Diabetes Management, Heart Health, Autoimmune Conditions, Cancer Nutrition, Gut Health, Food Allergies & Sensitivities, PCOS Management, High Blood Pressure, High Cholesterol, Kidney Disease, Weight Management, Eating Disorders, Pregnancy & Postpartum, Sports Nutrition, Transplant Nutrition, Vegan & Vegetarian, General Nutrition, Pediatric Nutrition, Menopause, Oral Health
                            </div>
                        </div>

                        <p class="dietitian-description">
                            As a dietitian, I offer my clients a blend of scientific research, prevent disease, and help shape dietary choices for overall wellbeing. I specialize in helping clients with chronic conditions manage their health through personalized nutrition strategies tailored to their unique needs and lifestyle.
                        </p>

                        <div class="availability">
                            <div class="availability-slot">July 29<br>2 appt</div>
                            <div class="availability-slot">August 5<br>3 appt</div>
                            <div class="availability-slot">August 6<br>5 appt</div>
                        </div>

                        <div class="dietitian-actions">
                            <button class="btn-primary" onclick="bookAppointment('Priya Sharma')">Book now</button>
                            <button class="btn-secondary" onclick="viewProfile('Priya Sharma')">View profile</button>
                        </div>
                    </div>
                </div>

                <!-- Dietitian 3 -->
                <div class="dietitian-card" data-location="Toronto" data-insurance="Canada Life,Sun Life Financial,Manulife,Great-West Life,Blue Cross,Chambers of Commerce Group Insurance,Desjardins Insurance,Industrial Alliance,Medavie Blue Cross,GroupHEALTH" data-specialties="Weight Management,Diabetes Management,Heart Health,Sports Nutrition,PCOS Management,Autoimmune Conditions,Food Allergies & Sensitivities,Gut Health,General Nutrition,Pregnancy & Postpartum,High Blood Pressure,High Cholesterol,Kidney Disease,Vegan & Vegetarian,Eating Disorders,Pediatric Nutrition,Cancer Nutrition,Menopause,Transplant Nutrition,Oral Health" data-modalities="Video calls,In-person">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' rx='60' fill='%23ecfdf5'/%3E%3Ctext x='60' y='75' text-anchor='middle' font-size='48' fill='%2310b981'%3Eüë©‚Äç‚öïÔ∏è%3C/text%3E%3C/svg%3E" alt="Julia Stanislavskaia" class="dietitian-avatar">
                    
                    <div class="dietitian-info">
                        <h2 class="dietitian-name">Julia Stanislavskaia, MSc, BSc, RD</h2>
                        
                        <div class="dietitian-credentials">
                            <div class="credential-badge">
                                üìπ Video calls
                            </div>
                            <div class="credential-badge">
                                üë• In-person
                            </div>
                            <div class="insurance-badge">
                                ‚úì Accepts All Major Insurance
                            </div>
                        </div>

                        <div class="specialties">
                            <div class="specialties-label">Specialties:</div>
                            <div class="specialties-list">
                                Weight Management, Diabetes Management, Heart Health, Sports Nutrition, PCOS Management, Autoimmune Conditions, Food Allergies & Sensitivities, Gut Health, General Nutrition, Pregnancy & Postpartum, High Blood Pressure, High Cholesterol, Kidney Disease, Vegan & Vegetarian, Eating Disorders, Pediatric Nutrition, Cancer Nutrition, Menopause, Transplant Nutrition, Oral Health
                            </div>
                        </div>

                        <p class="dietitian-description">
                            As a registered dietitian with advanced degrees in nutrition science, I provide evidence-based nutrition counseling to help clients achieve their health goals. My approach combines clinical expertise with practical strategies tailored to each individual's unique needs and lifestyle.
                        </p>

                        <div class="availability">
                            <div class="availability-slot">July 30<br>4 appt</div>
                            <div class="availability-slot">August 2<br>6 appt</div>
                            <div class="availability-slot">August 7<br>3 appt</div>
                        </div>

                        <div class="dietitian-actions">
                            <button class="btn-primary" onclick="bookAppointment('Julia Stanislavskaia')">Book now</button>
                            <button class="btn-secondary" onclick="viewProfile('Julia Stanislavskaia')">View profile</button>
                        </div>
                    </div>
                </div>

                <!-- Dietitian 4 -->
                <div class="dietitian-card" data-location="Toronto" data-insurance="Canada Life,Sun Life Financial,Manulife,Great-West Life,Blue Cross,Chambers of Commerce Group Insurance,Desjardins Insurance,Industrial Alliance,Medavie Blue Cross,GroupHEALTH" data-specialties="Weight Management,Diabetes Management,Heart Health,Sports Nutrition,PCOS Management,Autoimmune Conditions,Food Allergies & Sensitivities,Gut Health,General Nutrition,Pregnancy & Postpartum,High Blood Pressure,High Cholesterol,Kidney Disease,Vegan & Vegetarian,Eating Disorders,Pediatric Nutrition,Cancer Nutrition,Menopause,Transplant Nutrition,Oral Health" data-modalities="Video calls,In-person">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect width='120' height='120' rx='60' fill='%23fef2f2'/%3E%3Ctext x='60' y='75' text-anchor='middle' font-size='48' fill='%23dc2626'%3Eüë©‚Äç‚öïÔ∏è%3C/text%3E%3C/svg%3E" alt="Rowena Leung" class="dietitian-avatar">
                    
                    <div class="dietitian-info">
                        <h2 class="dietitian-name">Rowena Leung, RD, CDE</h2>
                        
                        <div class="dietitian-credentials">
                            <div class="credential-badge">
                                üìπ Video calls
                            </div>
                            <div class="credential-badge">
                                üë• In-person
                            </div>
                            <div class="insurance-badge">
                                ‚úì Accepts All Major Insurance
                            </div>
                        </div>

                        <div class="specialties">
                            <div class="specialties-label">Specialties:</div>
                            <div class="specialties-list">
                                Weight Management, Diabetes Management, Heart Health, Sports Nutrition, PCOS Management, Autoimmune Conditions, Food Allergies & Sensitivities, Gut Health, General Nutrition, Pregnancy & Postpartum, High Blood Pressure, High Cholesterol, Kidney Disease, Vegan & Vegetarian, Eating Disorders, Pediatric Nutrition, Cancer Nutrition, Menopause, Transplant Nutrition, Oral Health
                            </div>
                        </div>

                        <p class="dietitian-description">
                            As a registered dietitian and certified diabetes educator, I specialize in helping clients manage chronic conditions through personalized nutrition therapy. My expertise in diabetes education allows me to provide comprehensive support for blood sugar management and metabolic health.
                        </p>

                        <div class="availability">
                            <div class="availability-slot">August 3<br>2 appt</div>
                            <div class="availability-slot">August 8<br>4 appt</div>
                            <div class="availability-slot">August 9<br>5 appt</div>
                        </div>

                        <div class="dietitian-actions">
                            <button class="btn-primary" onclick="bookAppointment('Rowena Leung')">Book now</button>
                            <button class="btn-secondary" onclick="viewProfile('Rowena Leung')">View profile</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>


    <script>
        
        // Get URL parameters to show filtered results
        const urlParams = new URLSearchParams(window.location.search);
        const locationParam = urlParams.get('location');
        const insurance = urlParams.get('insurance');
        const specialty = urlParams.get('specialty');

        // Initialize page with URL parameters
        function initializePage() {
            console.log('=== INITIALIZING PAGE ===');
            console.log('URL parameters:', { location: locationParam, insurance, specialty });
            
            // Set dropdown values from URL parameters
            if (locationParam) {
                console.log(`Setting location filter to: ${locationParam}`);
                document.getElementById('locationFilter').value = locationParam;
            }
            if (insurance) {
                console.log(`Setting insurance filter to: ${insurance}`);
                document.getElementById('insuranceFilter').value = insurance;
            }
            if (specialty) {
                console.log(`Setting specialty filter to: ${specialty}`);
                document.getElementById('specialtyFilter').value = specialty;
            }
            
            console.log('Dropdown values after setting:');
            console.log('  Location:', document.getElementById('locationFilter').value);
            console.log('  Insurance:', document.getElementById('insuranceFilter').value);
            console.log('  Specialty:', document.getElementById('specialtyFilter').value);
            
            // Apply initial filtering from URL parameters
            console.log('Applying initial filters from URL parameters...');
            filterResults();
        }

        // Filter functionality
        function filterResults() {
            console.log('=== FILTER RESULTS CALLED ===');
            const cards = document.querySelectorAll('.dietitian-card');
            const insuranceFilter = document.getElementById('insuranceFilter').value;
            const locationFilter = document.getElementById('locationFilter').value;
            const specialtyFilter = document.getElementById('specialtyFilter').value;
            const modalitiesFilter = document.getElementById('modalitiesFilter').value;
            
            console.log('Current filter values:', {
                insurance: insuranceFilter,
                location: locationFilter,
                specialty: specialtyFilter,
                modalities: modalitiesFilter
            });
            
            // Get checked sidebar specialty filters
            const checkedSpecialties = [];
            document.querySelectorAll('#specialtyOptions input[type="checkbox"]:checked').forEach(checkbox => {
                checkedSpecialties.push(checkbox.value);
            });
            
            console.log('Checked specialties:', checkedSpecialties);
            
            let visibleCount = 0;
            
            cards.forEach((card, index) => {
                let show = true;
                const cardName = card.querySelector('.dietitian-name').textContent;
                
                // Get card data attributes
                const cardLocation = card.getAttribute('data-location');
                const cardInsurance = card.getAttribute('data-insurance');
                const cardSpecialties = card.getAttribute('data-specialties');
                const cardModalities = card.getAttribute('data-modalities');
                
                // Location filter - exact match required
                if (locationFilter) {
                    const locationMatch = cardLocation === locationFilter;
                    if (!locationMatch) {
                        show = false;
                        console.log(`${cardName} HIDDEN by location filter: "${locationFilter}" !== "${cardLocation}"`);
                    }
                }
                
                // Insurance filter
                if (insuranceFilter && show) {
                    const insuranceMatch = cardInsurance && cardInsurance.includes(insuranceFilter);
                    if (!insuranceMatch) {
                        show = false;
                        console.log(`${cardName} HIDDEN by insurance filter: "${insuranceFilter}" not in insurance list`);
                    }
                }
                
                // Specialty dropdown filter
                if (specialtyFilter && show) {
                    const specialtyMatch = cardSpecialties && cardSpecialties.includes(specialtyFilter);
                    if (!specialtyMatch) {
                        show = false;
                        console.log(`${cardName} HIDDEN by specialty filter: "${specialtyFilter}" not in specialties`);
                    }
                }
                
                // Sidebar specialty checkboxes filter (must have ALL checked specialties)
                if (checkedSpecialties.length > 0 && show) {
                    const hasAllSpecialties = checkedSpecialties.every(specialty => 
                        cardSpecialties.includes(specialty)
                    );
                    if (!hasAllSpecialties) {
                        show = false;
                        console.log(`${cardName} HIDDEN by sidebar specialties filter: missing some of ${checkedSpecialties}`);
                    }
                }
                
                // Modalities filter
                if (modalitiesFilter && show) {
                    const modalitiesMatch = cardModalities && cardModalities.includes(modalitiesFilter);
                    if (!modalitiesMatch) {
                        show = false;
                        console.log(`${cardName} HIDDEN by modalities filter: "${modalitiesFilter}" not in modalities`);
                    }
                }
                
                if (show) {
                    console.log(`${cardName} ‚úÖ VISIBLE`);
                }
                
                card.style.display = show ? 'flex' : 'none';
                if (show) visibleCount++;
            });
            
            document.getElementById('resultsCount').textContent = visibleCount;
            
            // Update location text in results count
            const currentLocationSpan = document.getElementById('currentLocation');
            if (locationFilter) {
                currentLocationSpan.textContent = locationFilter + ', Canada';
            } else {
                currentLocationSpan.textContent = 'Canada';
            }
            
            console.log(`\n=== FILTER RESULTS COMPLETE ===`);
            console.log(`Visible count: ${visibleCount}`);
            console.log(`Location display: ${currentLocationSpan.textContent}`);
        }

        // Event listeners removed - filtering now only happens when "Apply Filters" is clicked

        // Event listeners for checkboxes removed - filtering now only happens when "Apply Filters" is clicked

        // Clear filters - NEW FUNCTIONALITY
        function clearAllFilters() {
            console.log('=== CLEAR ALL FILTERS CALLED ===');
            
            // Clear all dropdown filters
            document.querySelectorAll('.filter-select').forEach(select => {
                select.value = '';
                console.log(`Cleared ${select.id}: ${select.value}`);
            });
            
            // Clear all checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            console.log('Cleared all checkboxes');
            
            // Clear URL parameters (update browser history without reload)
            const url = new URL(window.location);
            url.search = '';
            window.history.pushState({}, '', url);
            console.log('Cleared URL parameters');
            
            // Reset location display
            document.getElementById('currentLocation').textContent = 'Canada';
            console.log('Reset location display to Canada');
            
            // Apply filters (should show all dietitians now)
            console.log('Applying filters after clear...');
            filterResults();
            
            console.log('=== CLEAR FILTERS COMPLETE ===');
        }

        // Apply Current Filters - NEW FUNCTIONALITY  
        function applyCurrentFilters() {
            console.log('=== APPLY CURRENT FILTERS CALLED ===');
            
            // Get current filter values
            const currentFilters = {
                location: document.getElementById('locationFilter').value,
                insurance: document.getElementById('insuranceFilter').value,
                specialty: document.getElementById('specialtyFilter').value,
                modalities: document.getElementById('modalitiesFilter').value,
                sort: document.getElementById('sortFilter').value,
                visitType: document.getElementById('visitTypeFilter').value
            };
            
            // Get checked sidebar specialties
            const checkedSpecialties = [];
            document.querySelectorAll('#specialtyOptions input[type="checkbox"]:checked').forEach(checkbox => {
                checkedSpecialties.push(checkbox.value);
            });
            
            console.log('Current filters to apply:', currentFilters);
            console.log('Checked sidebar specialties:', checkedSpecialties);
            
            // Build URL parameters with current selections
            const params = new URLSearchParams();
            
            // Add non-empty filter values to URL
            Object.entries(currentFilters).forEach(([key, value]) => {
                if (value) {
                    params.append(key, value);
                }
            });
            
            // Add checked specialties (if any)
            if (checkedSpecialties.length > 0) {
                params.append('sidebarSpecialties', checkedSpecialties.join(','));
            }
            
            // Update browser URL with new parameters
            const newUrl = params.toString() ? `results.html?${params.toString()}` : 'results.html';
            window.history.pushState({}, '', newUrl);
            console.log('Updated URL to:', newUrl);
            
            // Apply the filtering immediately
            console.log('Applying filters...');
            filterResults();
            
            // Show confirmation message
            const confirmationMessage = `Filters applied! ${document.getElementById('resultsCount').textContent} results found.`;
            console.log(confirmationMessage);
            
            // Create a temporary notification
            const notification = document.createElement('div');
            notification.textContent = confirmationMessage;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                font-weight: 500;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                transition: all 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
            
            console.log('=== APPLY FILTERS COMPLETE ===');
        }

        // Booking and profile functions
        function bookAppointment(dietitianName) {
            console.log('üìã DEBUG: bookAppointment called for:', dietitianName);
            
            // Show booking confirmation
            const confirmBooking = confirm(`Would you like to request an appointment with ${dietitianName}?\n\nNote: All personal information was already submitted during your search. We will contact you using the details you provided to schedule your appointment.`);
            
            if (confirmBooking) {
                alert(`Thank you! Your booking request for ${dietitianName} has been submitted. We'll contact you within 24 hours using the contact information you provided earlier to confirm your appointment.`);
            }
        }


        function viewProfile(dietitianName) {
            alert(`Viewing profile for ${dietitianName}. This would show detailed profile information.`);
        }

        // Initialize page and filters on page load
        initializePage();
    </script>
</body>
</html>